<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat con Gemini</title>
    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom styles -->
    <link rel="stylesheet" href="/css/style.css">
</head>
<body class="has-background-light">
    <div class="chat-app is-flex is-flex-direction-column is-fullheight">
        <!-- Fixed Header -->
        <header class="chat-header has-background-primary has-text-white p-4 is-flex is-justify-content-space-between is-align-items-center">
            <div class="is-flex is-align-items-center">
                <i class="fas fa-robot mr-3"></i>
                <h1 class="title is-4 has-text-white mb-0">Chat con Gemini</h1>
            </div>
            <div class="is-flex is-align-items-center">
                <div class="select is-small is-rounded">
                    <select id="model" name="model">
                        <option value="gemini-1.5-flash" selected>Gemini 1.5 Flash</option>
                        <option value="gemini-pro">Gemini Pro</option>
                        <option value="imagen-2.0">Imagen 2.0</option>
                        <option value="gemini-2.5-flash-image-preview">Gemini 2.5 Flash</option>
                    </select>
                </div>
            </div>
        </header>

        <!-- Scrollable Chat Area -->
        <main class="chat-container is-flex-grow-1 has-background-white-ter">
            <div id="chat-window" class="chat-messages p-4">
                <!-- Messages will be dynamically added here -->
            </div>
        </main>

        <!-- Fixed Input Area -->
        <footer class="chat-input-area has-background-white p-4 box-shadow-top">
            <form id="chat-form" class="is-flex is-align-items-end">
                <div class="file-input-container mr-2">
                    <div class="field is-grouped">
                        <div class="control">
                            <button type="button" id="btn-upload-image" class="button is-info is-light is-rounded">
                                <span class="icon">
                                    <i class="fas fa-image"></i>
                                </span>
                            </button>
                        </div>
                        <div class="control">
                            <button type="button" id="btn-upload-doc" class="button is-info is-light is-rounded">
                                <span class="icon">
                                    <i class="fas fa-file-alt"></i>
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="is-flex-grow-1">
                    <textarea 
                        id="message" 
                        name="message" 
                        class="textarea is-rounded" 
                        placeholder="Escribe tu mensaje..." 
                        rows="1"
                        style="min-height: 48px; max-height: 120px; resize: none;"></textarea>
                </div>
                
                <div class="ml-2">
                    <button id="btn-send" type="submit" class="button is-primary is-rounded">
                        <span class="icon">
                            <i class="fas fa-paper-plane"></i>
                        </span>
                    </button>
                </div>
            </form>
            
            <div id="file-preview" class="file-preview mt-2 is-size-7 has-text-grey"></div>
            <input type="file" id="file" name="file" accept="image/*,.pdf,.txt,.doc,.docx" style="display: none;">
        </footer>
    </div>

    <!-- Image Modal -->
    <div id="image-modal" class="modal">
        <div class="modal-background"></div>
        <div class="modal-content">
            <img id="image-modal-img" class="image-modal-img" src="" alt="Imagen generada">
        </div>
        <button class="modal-close is-large" aria-label="close"></button>
    </div>

    <script src="/js/main.js"></script>
</body>
</html>
